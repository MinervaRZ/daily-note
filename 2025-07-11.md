# 2025-07-11 每日小结

## 1. 买家端与商家端功能完善

- **买家端**：
  - 商品详情页和购物车页已实现：购买数量不能超过 Supabase 实时库存，库存为0时不可购买。
  - 支付成功后，自动扣减 Supabase products 表中对应商品的库存（delivery 字段）。
  - 购物体验与库存管理实现了前后端同步。

- **商家端**：
  - 商家首页（dashboard）实现了经营数据总览，包括今日订单、今日销售额、剩余库存、新评论。
  - 剩余库存、今日订单、今日销售额均为动态统计，实时从 Supabase products 表和本地 orderHistory 统计。
  - 运营提醒会自动统计库存低于2的商品数，并高亮提醒。
  - 新建了库存管理页面，点击首页“剩余库存”可跳转，页面展示所有商品卡片及库存，库存低于2的商品卡片为浅红色，便于商家一眼识别。
  - Supabase products 表已添加 delivery 字段，所有库存操作均与后端同步。

## 2. 技术细节与优化

- 修复了小程序 require 路径问题，采用 `require('../../../utils/products.js')` 并确保文件存在。
- 商品库存页面和首页数据均从 Supabase 实时拉取，保证数据一致性。
- 订单、销售额、库存等统计逻辑全部前后端打通，支持后续扩展。
- 页面跳转、样式高亮、库存预警等细节体验优化。

## 3. 业务流程与角色分离

- 登录页支持“我是买家/我是商家”身份切换，登录后跳转到不同首页。
- 商家端和买家端页面、数据、功能完全分离，便于后续扩展更多角色和权限。 